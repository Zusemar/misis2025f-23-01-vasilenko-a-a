

## –¶–µ–ª—å —Ä–∞–±–æ—Ç—ã
–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º—ã–º–∏ —É—Ä–æ–≤–Ω—è–º–∏ —è—Ä–∫–æ—Å—Ç–∏, –¥–æ–±–∞–≤–∏—Ç—å –∞–¥–¥–∏—Ç–∏–≤–Ω—ã–π –Ω–æ—Ä–º–∞–ª—å–Ω—ã–π —à—É–º —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º–∏ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è–º–∏, –ø—Ä–æ–≤–µ—Å—Ç–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –ø–æ –æ–¥–Ω–æ—Ä–æ–¥–Ω—ã–º –æ–±–ª–∞—Å—Ç—è–º, –≤–∏–∑—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —è—Ä–∫–æ—Å—Ç–∏ –∏ —Å–¥–µ–ª–∞—Ç—å –≤—ã–≤–æ–¥—ã –æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —Ç–µ–æ—Ä–∏–∏.

---

### –ß–∞—Å—Ç—å 1. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

1. **–§—É–Ω–∫—Ü–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è**
   ```cpp
   cv::Mat gen_tgtimg00(const int lev0, const int lev1, const int lev2);
   ```
   –§–æ—Ä–º–∏—Ä—É–µ—Ç —Å–µ—Ä–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ **256√ó256 (CV_8UC1)** —Å —Ç—Ä–µ–º—è —É—Ä–æ–≤–Ω—è–º–∏ —è—Ä–∫–æ—Å—Ç–∏:
   - —Ñ–æ–Ω = `lev0`,
   - —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –∫–≤–∞–¥—Ä–∞—Ç **209√ó209** = `lev1`,
   - –∫—Ä—É–≥ —Ä–∞–¥–∏—É—Å–∞ **83** –ø–æ —Ü–µ–Ω—Ç—Ä—É = `lev2`.

2. **–§—É–Ω–∫—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —à—É–º–∞**
   ```cpp
   cv::Mat add_noise_gau(const cv::Mat& img, const int std);
   ```
   –î–æ–±–∞–≤–ª—è–µ—Ç –∞–¥–¥–∏—Ç–∏–≤–Ω—ã–π –Ω–µ—Å–º–µ—â—ë–Ω–Ω—ã–π –≥–∞—É—Å—Å–æ–≤ —à—É–º **N(0, œÉ¬≤)** —Å–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ–º `œÉ = std`.
   –†–µ–∞–ª–∏–∑–∞—Ü–∏—è: –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —à—É–º–æ–≤–æ–π –º–∞—Ç—Ä–∏—Ü—ã `cv::randn(noise32f, 0, œÉ)` –≤ `CV_32F` –∏ —Å–ª–æ–∂–µ–Ω–∏–µ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –≤ `CV_32F`, –∑–∞—Ç–µ–º –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ `CV_8U`

3. **–ö–æ–Ω—Å–æ–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ `task02`**
   - –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç 4 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–ª—è —É—Ä–æ–≤–Ω–µ–π:  
     `(0,127,255)`, `(20,127,235)`, `(55,127,200)`, `(90,127,165)`;
   - —Å–∫–ª–µ–∏–≤–∞–µ—Ç –∏—Ö –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏ ‚Üí **256√ó1024**;
   - —Å–æ–∑–¥–∞—ë—Ç –≤–µ—Ä—Å–∏–∏ —Å–æ —à—É–º–æ–º `œÉ ‚àà (3, 7, 15)`;
   - —Å–∫–ª–µ–∏–≤–∞–µ—Ç –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏ (–∏—Å—Ö–æ–¥–Ω–∏–∫ + 3 —à—É–º–∞) ‚Üí **1024√ó1024**;
   - —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ —Ñ–∞–π–ª, –ø—É—Ç—å –∑–∞–¥–∞—ë—Ç—Å—è –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏.

### –ß–∞—Å—Ç—å 2. –ê–Ω–∞–ª–∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

#### 1. –°–±–æ—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ –æ–¥–Ω–æ—Ä–æ–¥–Ω—ã–º –æ–±–ª–∞—Å—Ç—è–º

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è:
```cpp
PixelDistributionStats calc_distribution_stats(const cv::Mat& img, const cv::Mat& mask);
```
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è:
```
count, mean, variance, stddev, min, max
```
–ø–æ –ø–∏–∫—Å–µ–ª—è–º, –≥–¥–µ –º–∞—Å–∫–∞ –Ω–µ–Ω—É–ª–µ–≤–∞—è.

#### üìä –ê–ª–≥–æ—Ä–∏—Ç–º –≤—ã—á–∏—Å–ª–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

- –ö–∞–∂–¥–∞—è –ø–∏–∫—Å–µ–ª—å–Ω–∞—è –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å **x** —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ `mask(y, x) ‚â† 0`.
- –î–ª—è –≤—Å–µ—Ö –ø–∏–∫—Å–µ–ª–µ–π –æ–±–ª–∞—Å—Ç–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –Ω–∞–∫–æ–ø–ª–µ–Ω–∏–µ:

```
S1 = Œ£x
S2 = Œ£x¬≤
N  = count(mask > 0)
```

- –ü–æ—Å–ª–µ –ø—Ä–æ—Ö–æ–¥–∞ –ø–æ –æ–±–ª–∞—Å—Ç–∏ –≤—ã—á–∏—Å–ª—è—é—Ç—Å—è –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:

```
mean     = S1 / N
variance = (S2 / N) - (mean)¬≤
stddev   = sqrt(variance)
```

- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—é—Ç—Å—è –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø–∏–∫—Å–µ–ª–µ–π (`min`, `max`).
- –í—Å–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ —Ç–∏–ø–µ **double**, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–∏ —Å—É–º–º–∏—Ä–æ–≤–∞–Ω–∏–∏.

#### üß† –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤ –∫–æ–¥–µ
```cpp
double sum = 0, sum2 = 0;
int count = 0;
double minv = 255, maxv = 0;

for (int y = 0; y < img.rows; ++y) {
    const uchar* p = img.ptr<uchar>(y);
    const uchar* m = mask.ptr<uchar>(y);
    for (int x = 0; x < img.cols; ++x) {
        if (m[x]) {
            double v = p[x];
            sum += v;
            sum2 += v * v;
            if (v < minv) minv = v;
            if (v > maxv) maxv = v;
            count++;
        }
    }
}
double mean = sum / count;
double variance = sum2 / count - mean * mean;
double stddev = std::sqrt(variance);
```

#### –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –º–∞—Å–æ–∫
–î–ª—è –∫–∞–∂–¥–æ–π –ø–ª–∏—Ç–∫–∏ **256√ó256** —Å—Ç—Ä–æ–∏–ª–∏—Å—å —Ç—Ä–∏ –º–∞—Å–∫–∏:
- **background** ‚Äî –≤—Å—ë –∑–∞ –ø—Ä–µ–¥–µ–ª–∞–º–∏ –∫–≤–∞–¥—Ä–∞—Ç–∞ 209√ó209;  
- **square** ‚Äî –∫–≤–∞–¥—Ä–∞—Ç –±–µ–∑ –∫—Ä—É–≥–∞ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ–ø–µ—Ä–∞—Ü–∏—è –≤—ã—á–∏—Ç–∞–Ω–∏—è –º–∞—Å–æ–∫);  
- **circle** ‚Äî –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–π –∫—Ä—É–≥ —Ä–∞–¥–∏—É—Å–∞ 83 –ø–æ —Ü–µ–Ω—Ç—Ä—É.

–ú–∞—Å–∫–∏ —Å–æ–∑–¥–∞–≤–∞–ª–∏—Å—å —Ñ—É–Ω–∫—Ü–∏—è–º–∏ `cv::rectangle`, `cv::circle`, `cv::bitwise_not` –∏ `cv::bitwise_and`.

#### üìÑ –§–æ—Ä–º–∞—Ç CSV-—Ç–∞–±–ª–∏—Ü—ã
–î–ª—è –∫–∞–∂–¥–æ–π –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ –ø–ª–∏—Ç–∫–∏ –∏ œÉ –≤ CSV –∑–∞–ø–∏—Å—ã–≤–∞–ª–∏—Å—å —Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏–µ –∏ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:

```
tile,region,sigma,L_theory,mean_exp,diff_mean,var_theory,var_exp,diff_var,count,stddev,min,max
```

–ü–æ—è—Å–Ω–µ–Ω–∏—è:
- `L_theory` ‚Äî –Ω–æ–º–∏–Ω–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å —è—Ä–∫–æ—Å—Ç–∏ –æ–±–ª–∞—Å—Ç–∏;  
- `var_theory = œÉ¬≤`;  
- `diff_mean` –∏ `diff_var` ‚Äî –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è –æ—Ç —Ç–µ–æ—Ä–∏–∏.

**–¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏–µ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏—è:**
```
E[X] = L
Var[X] = œÉ¬≤
```

2. **–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –≥–∏—Å—Ç–æ–≥—Ä–∞–º–º**
   - –§—É–Ω–∫—Ü–∏—è:
     ```cpp
     cv::Mat draw_histogram_8u(const cv::Mat& img,
                               const cv::Scalar& bg = (224, 224, 224),
                               const cv::Scalar& bar = (32, 32, 32));
     ```
     –†–∏—Å—É–µ—Ç –≥–∏—Å—Ç–æ–≥—Ä–∞–º–º—É –≤ –∫–≤–∞–¥—Ä–∞—Ç–µ **256√ó256**, –≤—ã—Å–æ—Ç–∞ –º–∞–∫—Å–∏–º—É–º–∞ –Ω–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –∫ **250**.
     –°—Ç–æ–ª–±—Ü—ã ‚Äî —Ç—ë–º–Ω—ã–µ, —Ñ–æ–Ω ‚Äî —Å–≤–µ—Ç–ª–æ‚Äë—Å–µ—Ä—ã–π (–º–æ–∂–Ω–æ –≤–∞—Ä—å–∏—Ä–æ–≤–∞—Ç—å –¥–ª—è —à–∞—Ö–º–∞—Ç–Ω–æ–≥–æ —ç—Ñ—Ñ–µ–∫—Ç–∞).
   - –î–ª—è –∏—Å—Ö–æ–¥–Ω–∏–∫–∞ –∏ –∫–∞–∂–¥–æ–π —à—É–º–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏ —Å—Ç—Ä–æ—è—Ç—Å—è –≥–∏—Å—Ç–æ–≥—Ä–∞–º–º—ã, –º–æ–Ω—Ç–∏—Ä—É—é—Ç—Å—è –≤ –º–æ–∑–∞–∏–∫—É –≤ —Ç–æ–º –∂–µ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–∏, —á—Ç–æ –∏ —Ç–µ—Å—Ç–æ–≤—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è. –ö–ª—é—á `--hist` –≤ `task02` –≤–∫–ª—é—á–∞–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –º–æ–∑–∞–∏–∫–∏ –≥–∏—Å—Ç–æ–≥—Ä–∞–º–º.

### –ß–∞—Å—Ç—å 3. –û—Ç—á—ë—Ç
–î–∞–Ω–Ω—ã–π —Ñ–∞–π–ª.
//
//

---

## –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã (–∫—Ä–∞—Ç–∫–æ)

- –î–ª—è –æ–±–ª–∞—Å—Ç–µ–π **—Ñ–æ–Ω** –∏ **–∫–≤–∞–¥—Ä–∞—Ç** –Ω–∞–±–ª—é–¥–∞–µ–º—ã–µ —Å—Ä–µ–¥–Ω–∏–µ \(\texttt{mean\_exp}\) –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ —Å–æ–≤–ø–∞–¥–∞—é—Ç —Å \(L_\text{theory}\) (–ø–æ–≥—Ä–µ—à–Ω–æ—Å—Ç—å ‚â≤ 0.1).
- –ù–∞–±–ª—é–¥–∞–µ–º—ã–µ –¥–∏—Å–ø–µ—Ä—Å–∏–∏ var_exp –±–ª–∏–∑–∫–∏ –∫ sigma^2:  
  œÉ=3 ‚Üí ‚âà9, œÉ=7 ‚Üí ‚âà49, œÉ=15 ‚Üí ‚âà225.

**–§–∞–π–ª—ã:** `..._stats.csv` (—Ç–∞–±–ª–∏—Ü–∞), `..._hist.png` (–º–æ–∑–∞–∏–∫–∞ –≥–∏—Å—Ç–æ–≥—Ä–∞–º–º), –∏—Ç–æ–≥–æ–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ 4√ó4.

---

- **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≥–µ–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–∏—Ö –ø—Ä–∏–º–∏—Ç–∏–≤–æ–≤:** `cv::Rect`, `cv::circle`, –æ–ø–µ—Ä–∞—Ü–∏–∏ `setTo` / –º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ.
- **–ê–¥–¥–∏—Ç–∏–≤–Ω—ã–π —à—É–º:** `cv::randn` + —Ä–∞–±–æ—Ç–∞ –≤ `CV_32F` ‚Üí `convertTo(CV_8U)` —Å –Ω–∞—Å—ã—â–µ–Ω–∏–µ–º.
- **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –º–∞—Å–∫–µ:** –ø—Ä—è–º–æ–π –ø—Ä–æ—Ö–æ–¥ –ø–æ –ø–∏–∫—Å–µ–ª—è–º; –Ω–∞–∫–æ–ø–ª–µ–Ω–∏–µ `‚àëx`, `‚àëx¬≤`, –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ `mean`, `var = E[x¬≤] ‚àí (E[x])¬≤`, `stddev = sqrt(var)`.
- **–ì–∏—Å—Ç–æ–≥—Ä–∞–º–º—ã:** `cv::calcHist` (1D, 256 –±–∏–Ωo–≤), –Ω–æ—Ä–º–∏—Ä–æ–≤–∫–∞ –Ω–∞ –≤—ã—Å–æ—Ç—É 250 –∏ –æ—Ç—Ä–∏—Å–æ–≤–∫–∞ —Å—Ç–æ–ª–±—Ü–æ–≤.
- **–ö–æ–º–ø–æ–∑–∏—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π:** `cv::hconcat` / `cv::vconcat` –¥–ª—è —Å–±–æ—Ä–∫–∏ –º–æ–∑–∞–∏–∫.

---

## –í—ã–≤–æ–¥—ã
1. –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç —Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏–µ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏—è E[X] = L –∏ Var[X] =sigma^2 –¥–ª—è –∞–¥–¥–∏—Ç–∏–≤–Ω–æ–≥–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–≥–æ —à—É–º–∞.
2. –ù–∞—Å—ã—â–µ–Ω–∏–µ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ 8‚Äë–±–∏—Ç–Ω–æ–π —è—Ä–∫–æ—Å—Ç–∏ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –æ–∂–∏–¥–∞–µ–º—ã–º –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è–º –Ω–∞ —Å–≤–µ—Ç–ª—ã—Ö —É—á–∞—Å—Ç–∫–∞—Ö –ø—Ä–∏ –±–æ–ª—å—à–∏—Ö œÉ (–∑–∞–Ω–∏–∂–µ–Ω–∏–µ –¥–∏—Å–ø–µ—Ä—Å–∏–∏, —Å–º–µ—â–µ–Ω–∏–µ —Å—Ä–µ–¥–Ω–µ–≥–æ).